{% extends "base.html" %}
{% block title %}Novo Atendimento{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <!-- Cabeçalho -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-900">Novo Atendimento</h1>
                <p class="text-gray-600">Preencha os dados para registrar um novo atendimento</p>
            </div>
            <a href="{{ url_for('index') }}"
                class="inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                Voltar
            </a>
        </div>
    </div>

    <!-- Formulário -->
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
        <form method="POST" class="space-y-8">
            <!-- Primeira Linha -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Atendente Responsável -->
                <div>
                    <label for="atendente_responsavel" class="block text-sm font-medium text-gray-700 mb-2">
                        Atendente Responsável <span class="text-red-500">*</span>
                    </label>
                    <select id="atendente_responsavel" name="atendente_responsavel" required
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100 appearance-none">
                        <option value="" disabled selected>Selecione o atendente</option>
                        <option value="Amilton">Amilton</option>
                        <option value="Wesley">Wesley</option>
                        <option value="Zaninha">Zaninha</option>
                        <option value="Tifany">Tifany</option>
                        <option value="Thiago">Thiago</option>
                        <option value="Iana">Iana</option>
                        <option value="Letícia">Letícia</option>
                        <option value="Talita">Talita</option>
                        <option value="Yasmin">Yasmin</option>
                    </select>
                </div>

                <!-- Origem -->
                <div>
                    <label for="origem" class="block text-sm font-medium text-gray-700 mb-2">
                        Origem <span class="text-red-500">*</span>
                    </label>
                    <select id="origem" name="origem" required
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100 appearance-none">
                        <option value="" disabled selected>Selecione a origem</option>
                        <option value="WHATSAPP">WhatsApp</option>
                        <option value="EMAIL">E-mail</option>
                        <option value="TELEFONE">Telefone</option>
                        <option value="PRESENCIAL">Presencial</option>
                    </select>
                </div>
            </div>

            <!-- Segunda Linha -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Protocolo -->
                <div>
                    <label for="protocolo" class="block text-sm font-medium text-gray-700 mb-2">
                        Protocolo <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="protocolo" name="protocolo" required placeholder="Número do protocolo"
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100">
                </div>

                <!-- Departamento -->
                <div>
                    <label for="departamento" class="block text-sm font-medium text-gray-700 mb-2">
                        Departamento <span class="text-red-500">*</span>
                    </label>
                    <select id="departamento" name="departamento" required
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100 appearance-none">
                        <option value="" disabled selected>Selecione o departamento</option>
                        <option value="Secretaria">Secretaria</option>
                        <option value="Supervisão">Supervisão</option>
                        <option value="Direção">Direção</option>
                        <option value="Outro">Outro</option>
                    </select>
                </div>
            </div>

            <!-- Terceira Linha -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Nível de Atendimento -->
                <div>
                    <label for="nivel" class="block text-sm font-medium text-gray-700 mb-2">
                        Nível de Atendimento <span class="text-red-500">*</span>
                    </label>
                    <select id="nivel" name="nivel" required
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100 appearance-none">
                        <option value="" disabled selected>Selecione o nível</option>
                        <option value="1">Nível 1 - Atendimento Básico</option>
                        <option value="2">Nível 2 - Atendimento Avançado</option>
                        <option value="3">Nível 3 - Suporte Especializado</option>
                    </select>
                </div>

                <!-- Suporte Adicional -->
                <div id="suporte_adicional_container" style="display: none;">
                    <label for="suporte_adicional" class="block text-sm font-medium text-gray-700 mb-2">
                        Suporte Adicional <span class="text-red-500">*</span>
                    </label>
                    <select id="suporte_adicional" name="suporte_adicional"
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100 appearance-none">
                        <option value="" disabled selected>Selecione o suporte</option>
                        <optgroup label="Programação">
                            <option value="Vinícius">Vinícius</option>
                            <option value="Vivian">Vivian</option>
                        </optgroup>
                        <optgroup label="Gestão">
                            <option value="Deusdete">Deusdete</option>
                        </optgroup>
                    </select>
                </div>
            </div>

            <!-- Quarta Linha -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Nome do Cliente -->
                <div>
                    <label for="nome_cliente" class="block text-sm font-medium text-gray-700 mb-2">
                        Nome do Cliente <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="nome_cliente" name="nome_cliente" required
                        placeholder="Nome completo do cliente"
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100">
                </div>

                <!-- Número de Contato -->
                <div>
                    <label for="numero" class="block text-sm font-medium text-gray-700 mb-2">
                        Número de Contato
                    </label>
                    <input type="text" id="numero" name="numero" placeholder="(00) 00000-0000"
                        class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100">
                </div>
            </div>

            <!-- Motivo do Atendimento -->
            <div>
                <label for="motivo" class="block text-sm font-medium text-gray-700 mb-2">
                    Motivo do Atendimento <span class="text-red-500">*</span>
                </label>
                <textarea id="motivo" name="motivo" rows="4" required
                    placeholder="Descreva detalhadamente o motivo do atendimento"
                    class="block w-full px-4 py-3 text-gray-700 bg-white border border-gray-200 rounded-lg focus:outline-none focus:border-blue-400 focus:ring focus:ring-blue-100 resize-none"></textarea>
            </div>

            <!-- Botões -->
            <div class="flex justify-end space-x-4 pt-4">
                <a href="{{ url_for('index') }}"
                    class="px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-medium">
                    Cancelar
                </a>
                <button type="submit" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
                    Salvar Atendimento
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById('nivel').addEventListener('change', function () {
        const suporteContainer = document.getElementById('suporte_adicional_container');
        const suporteSelect = document.getElementById('suporte_adicional');

        if (this.value === '3') {
            suporteContainer.style.display = 'block';
            suporteSelect.required = true;
        } else {
            suporteContainer.style.display = 'none';
            suporteSelect.required = false;
            suporteSelect.value = '';
        }
    });
</script>
{% endblock %}